{"version":3,"sources":["features/train/model/testStage.ts","features/train/selectors/index.ts","features/train/slice/configuration.ts","features/train/slice/selectRandom.ts","features/train/slice/index.ts","features/train/components/Icons.tsx","features/train/components/ToggleText/ToggleText.tsx","features/train/components/TrainGerman/TrainGerman.tsx","features/train/components/TrainGerman/TrainGermanContainer.tsx","features/train/components/TrainPhoneticPersian/TrainPhoneticPersian.tsx","features/train/routes/index.tsx","routes/index.ts","components/Header.tsx","components/App.tsx","reducers/index.ts","serviceWorker.ts","decodeUrl.ts","index.tsx"],"names":["TestStage","selectSlice","state","train","selectedDe","createSelector","units","selectedIdDe","selected","find","unit","id","configuration","score","frequency","minGap","buildPartialSums","values","partialSums","Array","length","ongoingSum","i","getLast","array","defaultValue","slice","selectRandom","elements","weightProjection","rand","Math","random","weights","map","el","elementUpperBounds","totalWeight","selectedValue","selectedIndex","findIndex","sum","initialState","vocab","progress","scoreDe","scoreFaPh","lastCorrectDe","lastCorrectFaPh","createSlice","name","reducers","selectDe","selectedUnit","getPriorityDe","passDe","getProgress","min","Date","toISOString","failDe","max","config","c","gap","getDifferenceFromNowInSeconds","undefined","date","differenceInSeconds","Number","POSITIVE_INFINITY","u","Error","actions","Plus","width","height","viewBox","className","fill","xmlns","fillRule","d","Dash","ToggleText","expanded","this","props","title","value","onClick","setState","React","Component","TrainGerman","enteredTranslation","stage","Initial","event","preventDefault","isShowSolution","proceed","check","pass","de","reportResult","getStageAfterCheck","Passed","PassedOnRetry","Retry","Failed","fail","onSubmit","e","submit","isCountingAsFailure","isCountingAsSuccess","fa","faRm","Fragment","en","htmlFor","type","autoComplete","autoCorrect","autoCapitalize","onChange","target","renderButtons","key","solve","includes","mapDispatchToProps","TrainGermanContainer","connect","TrainPhoneticPersian","path","component","Header","collapseRef","createRef","collapse","current","Collapse","toggle","ref","to","hide","App","basename","process","routes","rootReducer","combineReducers","Boolean","window","location","hostname","match","search","decoded","split","s","replace","join","replaceUrl","pathname","hash","history","replaceState","decodeUrl","persistedReducer","persistReducer","storage","version","reducer","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","ReactDOM","render","StrictMode","hidden","loading","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.de8b5d3f.chunk.js","sourcesContent":["export enum TestStage {\n  Initial,\n  Retry,\n  Passed,\n  PassedOnRetry,\n  Failed,\n}","import { createSelector } from '@reduxjs/toolkit';\nimport { State } from '../slice';\n\nconst selectSlice = (state: any): State => state.train;\n\nexport const selectedDe = createSelector([selectSlice], ({ units, selectedIdDe }) => {\n  const selected = units.find(unit => unit.id === selectedIdDe);\n  return selected ?? null;\n});\n\nexport default selectSlice;\n","const configuration = [\n  { score: 0, frequency: 16, minGap: 60 },\n  { score: 1, frequency: 8, minGap: 5*60 },\n  { score: 2, frequency: 4, minGap: 30*60 },\n  { score: 3, frequency: 2, minGap: 3*60*60 },\n  { score: 4, frequency: 1, minGap: 24*60*60 },\n];\n\nexport default configuration;","const selectRandom = <T> (\n  elements: T[],\n  weightProjection: (el: T) => number,\n  rand = Math.random()\n): T | null => {\n  const weights = elements.map(el => weightProjection(el));\n  const elementUpperBounds = buildPartialSums(weights);\n  const totalWeight = getLast(elementUpperBounds, 0);\n\n  if (totalWeight === 0) {\n    return null;\n  }\n\n  const selectedValue = rand * totalWeight;\n  const selectedIndex = elementUpperBounds.findIndex(sum => selectedValue <= sum);\n  return elements[selectedIndex];\n};\n\nconst buildPartialSums = (values: number[]): number[] => {\n  const partialSums = new Array(values.length);\n  let ongoingSum = 0;\n  for (let i = 0; i < values.length; i++) {\n    ongoingSum += values[i];\n    partialSums[i] = ongoingSum;\n  }\n  return partialSums;\n};\n\nconst getLast = <T> (array: T[], defaultValue: T): T => {\n  if (array.length > 0) {\n    return array.slice(-1)[0];\n  } else {\n    return defaultValue;\n  }\n};\n\nexport default selectRandom;","import { createSlice } from '@reduxjs/toolkit';\nimport { differenceInSeconds } from 'date-fns';\nimport { LearningProgress, LearningUnit } from '../model/learningUnit';\nimport configuration from './configuration';\nimport selectRandom from './selectRandom';\nimport vocabulary from './vocabulary.json';\n\nexport interface State {\n  units: LearningUnit[];\n  selectedIdDe: number | null;\n}\n\nconst learningUnits = vocabulary.map((vocab, i) => ({\n  ...(vocab as Pick<LearningUnit, 'type' | 'de' | 'en' | 'fa' | 'faRm'>),\n  id: i,\n  progress: {\n    scoreDe: 0,\n    scoreFaPh: 0,\n    lastCorrectDe: null,\n    lastCorrectFaPh: null,\n  },\n}));\n\nconst initialState: State = {\n  units: learningUnits,\n  selectedIdDe: 0,\n};\n\nconst slice = createSlice({\n  name: 'train',\n  initialState,\n  reducers: {\n    selectDe: (state): void => {\n      const selectedUnit = selectRandom(state.units, unit => getPriorityDe(unit));\n      state.selectedIdDe = selectedUnit?.id ?? null;\n    },\n    passDe: ({ units, selectedIdDe }): void => {\n      const progress = getProgress(units, selectedIdDe);\n      progress.scoreDe = Math.min(progress.scoreDe + 1, 5);\n      progress.lastCorrectDe = new Date().toISOString();\n    },\n    failDe: ({ units, selectedIdDe }): void => {\n      const progress = getProgress(units, selectedIdDe);\n      progress.scoreDe = Math.max(progress.scoreDe - 1, 0);\n    }\n  }\n});\n\nconst getPriorityDe = (unit: LearningUnit): number => {\n  const { scoreDe, lastCorrectDe } = unit.progress;\n  const config = configuration.find(c => c.score === scoreDe);\n  const gap = getDifferenceFromNowInSeconds(lastCorrectDe);\n\n  if (config !== undefined && gap > config.minGap) {\n    return config.frequency;\n  } else {\n    return 0;\n  }\n};\n\nconst getDifferenceFromNowInSeconds = (date: string | null): number => {\n  if (date !== null) {\n    return differenceInSeconds(new Date(), new Date(date));\n  } else {\n    return Number.POSITIVE_INFINITY;\n  }\n};\n\nconst getProgress = (state: LearningUnit[], id: number | null): LearningProgress => {\n  const unit = state.find(u => u.id === id);\n  if (!unit) {\n    throw new Error(`Learning unit with id ${id} does not exist.`);\n  }\n  return unit.progress;\n};\n\nexport const { passDe, failDe, selectDe } = slice.actions;\nexport default slice.reducer;","import React from 'react';\n\nexport const Plus = (): JSX.Element => (\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-plus\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fillRule=\"evenodd\" d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\n  </svg>\n);\n\nexport const Dash = (): JSX.Element => (\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-dash\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fillRule=\"evenodd\" d=\"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z\"/>\n  </svg>\n);","import React from 'react';\nimport { Dash, Plus } from '../Icons';\n\nexport class ToggleText extends React.Component<{\n  title: string;\n  value: string;\n}, {\n  expanded: boolean;\n}> {\n  state = {\n    expanded: false,\n  };\n\n  render(): JSX.Element {\n    const { title, value } = this.props;\n    if (this.state.expanded) {\n      return (\n        <div className=\"cursor-pointer\"\n          onClick={(): void => this.setState({ expanded: false })}\n        >\n          <Dash></Dash> {title}: <em>{value}</em>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"cursor-pointer\"\n          onClick={(): void => this.setState({ expanded: true })}\n        >\n          <Plus></Plus> {title}\n        </div>\n      );\n    }\n  }\n}","import React from 'react';\nimport { LearningUnit } from '../../model/learningUnit';\nimport { TestStage } from '../../model/testStage';\nimport { ToggleText } from '../ToggleText/ToggleText';\n\nexport class TrainGerman extends React.Component<{\n  unit: LearningUnit;\n  pass: () => void;\n  fail: () => void;\n  proceed: () => void;\n},\n{\n  enteredTranslation: string;\n  stage: TestStage;\n}> {\n  state = {\n    enteredTranslation: '',\n    stage: TestStage.Initial,\n  };\n\n  private submit(event: React.FormEvent): void {\n    event.preventDefault();\n    if (this.isShowSolution()) {\n      this.proceed();\n    } else {\n      this.check();\n    }\n  }\n\n  private proceed(): void {\n    this.props.proceed();\n    this.setState({\n      enteredTranslation: '',\n      stage: TestStage.Initial,\n    });\n  }\n\n  private check(): void {\n    const pass = this.state.enteredTranslation === this.props.unit.de;\n    this.reportResult(pass);\n    this.setState({ stage: this.getStageAfterCheck(pass) });\n  }\n\n  private getStageAfterCheck(pass: boolean): TestStage {\n    if (!pass) {\n      return TestStage.Retry;\n    } else if (this.state.stage === TestStage.Initial) {\n      return TestStage.Passed;\n    } else {\n      return TestStage.PassedOnRetry;\n    }\n  }\n\n  private solve(): void {\n    this.reportResult(false);\n    this.setState({ stage: TestStage.Failed });\n  }\n\n  private reportResult(pass: boolean): void {\n    if (this.state.stage !== TestStage.Initial) {\n      return;\n    } else if (pass) {\n      this.props.pass();\n    } else {\n      this.props.fail();\n    }\n  }\n\n  render(): JSX.Element {\n    const { unit } = this.props;\n    return (\n      <form onSubmit={(e): void => this.submit(e)}>\n        <h2>Deutsch trainieren</h2>\n        <div className=\"mb-3\">\n          <div>\n            Fortschritt\n          </div>\n          <div className={'form-control-plaintext'\n              + (this.isCountingAsFailure() ? ' text-danger' : '')\n              + (this.isCountingAsSuccess() ? ' text-success' : '')\n          }>\n            {unit.progress.scoreDe}\n          </div>\n        </div>\n        <div className=\"mb-3\">\n          <div>\n            Persisch\n          </div>\n          <div className=\"form-control-plaintext text-large\">\n            {unit.fa}\n          </div>\n          <div className=\"form-text\">\n            <ToggleText title=\"Romanisierung\" value={unit.faRm}></ToggleText>\n          </div>\n        </div>\n        {this.isShowSolution() ? (\n          <React.Fragment>\n            <div className=\"mb-3\">\n              <div>Deutsch</div>\n              <div className=\"form-control-plaintext\">\n                {this.isCountingAsFailure()\n                  ? (\n                    <React.Fragment>\n                      <span className=\"text-danger text-decoration-line-through\">\n                        {this.state.enteredTranslation}\n                      </span>\n                      <span> </span>\n                    </React.Fragment>\n                  ) : null\n                }\n                <span className=\"text-success\">\n                  {unit.de}\n                </span>\n              </div>\n              <div className=\"form-text\">\n                <ToggleText title=\"Englisch\" value={unit.en}></ToggleText>\n              </div>\n            </div>\n          </React.Fragment>\n        ) : (\n          <div className=\"mb-3\">\n            <label htmlFor=\"german\">\n              Deutsch\n            </label>\n            <input type=\"text\"\n              id=\"german\"\n              className=\"form-control\"\n              value={this.state.enteredTranslation}\n              autoComplete=\"off\"\n              autoCorrect=\"off\"\n              autoCapitalize=\"off\"\n              onChange={(e): void => this.setState({ enteredTranslation: e.target.value })}\n            >\n            </input>\n            <div className=\"form-text\">\n              &nbsp;\n            </div>\n          </div>\n        )}\n        {this.renderButtons()}\n      </form>\n    );\n  }\n\n  private renderButtons(): JSX.Element {\n    if (this.isShowSolution()) {\n      return (\n        <div className=\"col\">\n          <button type=\"submit\"\n            className=\"btn btn-primary btn-block\"\n            key=\"proceed-btn\"\n          >\n            Weiter\n          </button>\n        </div>\n      );\n    } else {\n      return (\n        <React.Fragment>\n          <div className=\"row mb-2\">\n            <div className=\"col-6 col-sm-4\">\n              <button type=\"button\"\n                className=\"btn btn-secondary btn-block\"\n                key=\"solve-btn\"\n                onClick={(): void => this.solve()}\n              >\n                Auflösen\n              </button>\n            </div>\n            <div className=\"col-6 col-sm-8\">\n              <button type=\"submit\"\n                className=\"btn btn-primary btn-block\"\n                key=\"chck-btn\"\n              >\n                Überprüfen\n              </button>\n            </div>\n          </div>\n          {this.state.stage === TestStage.Initial\n            ? (\n              <div className=\"row\">\n                <div className=\"col\">\n                  <button type=\"button\"\n                    className=\"btn btn-link btn-block\"\n                    key=\"skip-btn\"\n                    onClick={(): void => this.proceed()}\n                  >\n                    Überspringen\n                  </button>\n                </div>\n              </div>\n            ) : ''\n          }\n        </React.Fragment>\n      );\n    }\n  }\n\n  private isShowSolution(): boolean {\n    return [\n      TestStage.Passed,\n      TestStage.PassedOnRetry,\n      TestStage.Failed\n    ].includes(this.state.stage);\n  }\n\n  private isCountingAsFailure(): boolean {\n    return [\n      TestStage.PassedOnRetry,\n      TestStage.Retry,\n      TestStage.Failed\n    ].includes(this.state.stage);\n  }\n\n  private isCountingAsSuccess(): boolean {\n    return [\n      TestStage.Passed\n    ].includes(this.state.stage);\n  }\n}","import { connect } from 'react-redux';\nimport { selectedDe } from '../../selectors';\nimport { failDe, passDe, selectDe } from '../../slice';\nimport { TrainGerman } from './TrainGerman';\n\nconst mapStateToProps = (state: any): any => ({\n  unit: selectedDe(state) // TODO: selection can be null\n});\n\nconst mapDispatchToProps = {\n  pass: passDe,\n  fail: failDe,\n  proceed: selectDe,\n};\n\nexport const TrainGermanContainer =\n  connect(mapStateToProps, mapDispatchToProps)(TrainGerman);","import React from 'react';\n\nexport class TrainPhoneticPersian extends React.Component {\n  render(): JSX.Element {\n    return (\n      <div>\n        Hello TrainPhoneticPersian\n      </div>\n    );\n  }\n}","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { TrainGermanContainer } from '../components/TrainGerman/TrainGermanContainer';\nimport { TrainPhoneticPersian } from '../components/TrainPhoneticPersian/TrainPhoneticPersian';\n\nexport default [\n  <Route key=\"train-german\"\n    path=\"/train/german\"\n    component={TrainGermanContainer}>\n  </Route>,\n  <Route key=\"train-phonetic-persian\"\n    path=\"/train/phonetic-persian\"\n    component={TrainPhoneticPersian}>\n  </Route>,\n];","import train from '../features/train/routes';\n\nexport default [\n  ...train\n];","import { Collapse } from 'bootstrap';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport class Header extends React.Component {\n  private collapseRef = React.createRef<HTMLDivElement>();\n  private collapse?: Collapse;\n\n  componentDidMount(): void {\n    if (this.collapseRef.current) {\n      this.collapse = new Collapse(this.collapseRef.current, {\n        toggle: false\n      });\n    }\n  }\n\n  render(): JSX.Element {\n    return (\n      <nav className=\"navbar navbar-expand-md navbar-dark bg-primary mb-2\">\n        <div className=\"container\">\n          <span className=\"navbar-brand mb-0 h1\">\n            Persian Learner\n          </span>\n          <button type=\"button\"\n            className=\"navbar-toggler\"\n            onClick={(): void => this.collapse?.toggle()}\n          >\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div\n            id=\"navbar-content\"\n            className=\"collapse navbar-collapse\"\n            ref={this.collapseRef}\n          >\n            <ul className=\"navbar-nav mr-auto mb-0\">\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\"\n                  to=\"/train/german\"\n                  onClick={(): void => this.collapse?.hide()}\n                >\n                  Deutsch trainieren\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\"\n                  to=\"/train/phonetic-persian\"\n                  onClick={(): void => this.collapse?.hide()}\n                >\n                  Persisch trainieren\n                </Link>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n    );\n  }\n}","import React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport routes from '../routes';\nimport { Header } from './Header';\n\nexport class App extends React.Component {\n  render(): JSX.Element {\n    return (\n      <BrowserRouter basename={process.env.REACT_APP_BASE_HREF}>\n        <header>\n          <Header></Header>\n        </header>\n        <main className=\"container\">\n          { routes }\n        </main>\n      </BrowserRouter>\n    );\n  }\n}\n","import { combineReducers } from '@reduxjs/toolkit';\nimport train from '../features/train/slice';\n\nconst rootReducer = combineReducers({\n  train\n});\n\nexport default rootReducer;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config): void {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config): void {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = (): void => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = (): void => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config): void {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister(): void {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","// Single Page Apps for GitHub Pages\n// MIT License\n// https://github.com/rafgraph/spa-github-pages\n// This script checks to see if a redirect is present in the query string,\n// converts it back into the correct url and adds it to the\n// browser's history using window.history.replaceState(...),\n// which won't cause the browser to attempt to load the new url.\n// When the single page app is loaded further down in this file,\n// the correct url will be waiting in the browser's history for\n// the single page app to route accordingly.\n\nexport default (): void => {\n  const location = window.location;\n  if (location.search[1] === '/' ) {\n    const decoded = location.search\n      .slice(1)\n      .split('&')\n      .map((s) => s.replace(/~and~/g, '&'))\n      .join('?');\n    const replaceUrl = location.pathname.slice(0, -1) + decoded + location.hash;\n    window.history.replaceState(null, null as any, replaceUrl);\n  }\n};\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { FLUSH, PAUSE, PERSIST, persistReducer, persistStore, PURGE, REGISTER, REHYDRATE } from 'redux-persist';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport storage from 'redux-persist/lib/storage';\nimport { version } from '../package.json';\nimport { App } from './components/App';\nimport decodeUrl from './decodeUrl';\nimport './index.scss';\nimport reducer from './reducers';\nimport * as serviceWorker from './serviceWorker';\n\nif (process.env.NODE_ENV === 'production') {\n  decodeUrl();\n}\n\nconst persistedReducer = persistReducer({\n  key: 'root',\n  storage,\n  version: 1\n}, reducer);\n\nconst store = configureStore({\n  reducer: persistedReducer,\n  middleware: getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER]\n    }\n  })\n});\nconst persistor = persistStore(store);\n\nReactDOM.render(\n  <React.StrictMode>\n    <span className=\"version\" hidden>\n      {version}-{process.env.NODE_ENV}\n    </span>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <App />\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}